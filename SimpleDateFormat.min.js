function simpleDateFormat(pattern,locale){this.locale=(locale&&(locale=='es_US'||locale=='en_CA'||locale=='fr_CA'||locale=='en_GB'))?locale:'en_US';this.applyPattern=function(updatedPattern){this.pattern=updatedPattern||((this.locale=='en_CA'||this.locale=='fr_CA'||this.locale=='en_GB')?'d/M/yy':'M/d/yy')};this.applyPattern(pattern);this.format=function(unformattedDate){unformattedDate=unformattedDate||new Date();if(!(unformattedDate instanceof Date)){var unformattedDateParts=unformattedDate.split('T')[0].split('-'),unformattedDateTimeParts=(unformattedDate.split('T').length>1)?unformattedDate.split('T')[1].split('.')[0].split('Z')[0].split('-')[0].split(':'):['00','00','00'];unformattedDate=new Date(unformattedDateParts[0],(unformattedDateParts[1]-1),unformattedDateParts[2],unformattedDateTimeParts[0],unformattedDateTimeParts[1],unformattedDateTimeParts[2])}var oneDigitNumber=function(num){num=''+num;return(num.indexOf('0')==0&&num!='0')?num.substring(1):num};var twoDigitNumber=function(num){num=Number(num);return(isNaN(num))?'00':(((num<10)?'0':'')+num)};var dateParts={month:twoDigitNumber(unformattedDate.getMonth()+1),date:twoDigitNumber(unformattedDate.getDate()),year:twoDigitNumber(unformattedDate.getFullYear()),day:unformattedDate.getDay(),hour24:unformattedDate.getHours(),hour12:unformattedDate.getHours(),minutes:twoDigitNumber(unformattedDate.getMinutes()),ampm:'AM'};if(dateParts.hour24>11){dateParts.ampm='PM'}dateParts.hour24=twoDigitNumber(dateParts.hour24);if(dateParts.hour12==0){dateParts.hour12=12}if(dateParts.hour12>12){dateParts.hour12=dateParts.hour12-12}dateParts.hour12=twoDigitNumber(dateParts.hour12);var formattedDate;var patternReplace=function(patternPart){var patternPartFormatted=patternPart.replace(/yy+(?=y)/g,'yy').replace(/MMM+(?=M)/g,'MMM').replace(/d+(?=d)/g,'d').replace(/EEE+(?=E)/g,'EEE').replace(/a+(?=a)/g,'').replace(/k+(?=k)/g,'k').replace(/h+(?=h)/g,'h').replace(/m+(?=m)/g,'m');var formattedPart=patternPartFormatted.replace(/yyy/g,dateParts.year).replace(/yy/g,dateParts.year.substring(2)).replace(/y/g,dateParts.year).replace(/dd/g,dateParts.date).replace(/d/g,oneDigitNumber(dateParts.date)),adjustTimePattern=function(timeParts,timePatternPart,operator){for(i=1;i<timeParts.length;i++){if(!isNaN(timeParts[i].substring(0,1))){var timePartOperand=timeParts[i].substring(0,2);timeParts[i]=timeParts[i].substring(2);if(isNaN(timePartOperand.substring(1))){timeParts[i]=timePartOperand.substring(1)+timeParts[i];timePartOperand=timePartOperand.substring(0,1)}timePartOperand=Number(timePartOperand);if(timePartOperand>23){timePartOperand=23}var timePartResult=(operator=='+')?timePartOperand:(0-timePartOperand);if(timePatternPart=='kk'||timePatternPart=='k'){timePartResult=(Number(dateParts.hour24)+timePartResult);if(timePartResult>24){timePartResult=timePartResult-24}else if(timePartResult<0){timePartResult=timePartResult+24}}else{timePartResult=(Number(dateParts.hour12)+timePartResult);if(timePartResult>24){timePartResult=timePartResult-24}else if(timePartResult<0){timePartResult=timePartResult+24}if(timePartResult>12){timePartResult=timePartResult-12}}timePartResult=''+timePartResult;if(timePatternPart=='kk'||timePatternPart=='hh'){timePartResult=twoDigitNumber(timePartResult)}if((timePatternPart=='h'&&timePartResult==0)||(timePatternPart=='hh'&&timePartResult=='00')){timePartResult='12'}timeParts[i]=timePartResult+timeParts[i]}}return timeParts.join('')};if(formattedPart.indexOf('k+')!=-1){formattedPart=adjustTimePattern(formattedPart.split('kk+'),'kk','+');formattedPart=adjustTimePattern(formattedPart.split('k+'),'k','+')}if(formattedPart.indexOf('k-')!=-1){formattedPart=adjustTimePattern(formattedPart.split('kk-'),'kk','-');formattedPart=adjustTimePattern(formattedPart.split('k-'),'k','-')}formattedPart=formattedPart.replace(/kk/g,dateParts.hour24).replace(/k/g,oneDigitNumber(dateParts.hour24));if(formattedPart.indexOf('h+')!=-1){formattedPart=adjustTimePattern(formattedPart.split('hh+'),'hh','+');formattedPart=adjustTimePattern(formattedPart.split('h+'),'h','+')}if(formattedPart.indexOf('h-')!=-1){formattedPart=adjustTimePattern(formattedPart.split('hh-'),'hh','-');formattedPart=adjustTimePattern(formattedPart.split('h-'),'h','-')}formattedPart=formattedPart.replace(/hh/g,((dateParts.hour12<12&&dateParts.hour12.indexOf&&dateParts.hour12.indexOf('0')!=0)?('0'+dateParts.hour12):dateParts.hour12)).replace(/h/g,oneDigitNumber(dateParts.hour12));formattedPart=formattedPart.replace(/mm/g,dateParts.minutes).replace(/m/g,oneDigitNumber(dateParts.minutes));formattedPart=formattedPart.replace(/a/g,'A');var formattedMonthNames=['January','February','march','april','may','June','July','august','September','October','November','December'];if(locale=='es_US'){formattedMonthNames=['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre']}if(locale=='fr_CA'){formattedMonthNames=['janvier','f&#233;vrier','mars','avril','mai','juin','juillet','ao&#251;t','septembre','octobre','novembre','d&#233;cembre']}formattedPart=formattedPart.replace(/MMMM/g,formattedMonthNames[Number(dateParts.month)-1]).replace(/MMM/g,formattedMonthNames[Number(dateParts.month)-1].substring(0,3)).replace(/MM/g,dateParts.month).replace(/M/g,oneDigitNumber(dateParts.month)).replace(/march/g,'March').replace(/may/g,'May');var formattedDayNames=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];if(locale=='es_US'){formattedDayNames=['domingo','lunes','martes','mi&eacute;rcoles','jueves','viernes','s&aacute;bado']}if(locale=='fr_CA'){formattedDayNames=['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi']}formattedPart=formattedPart.replace(/EEEE/g,formattedDayNames[dateParts.day]).replace(/EEE/g,formattedDayNames[dateParts.day].substring(0,3)).replace(/EE/g,formattedDayNames[dateParts.day].substring(0,3)).replace(/E/g,formattedDayNames[dateParts.day].substring(0,3));formattedPart=formattedPart.replace(/A/g,dateParts.ampm).replace(/april/g,'April').replace(/august/g,'August');return formattedPart};if(this.pattern.indexOf('\'')==-1){formattedDate=patternReplace(this.pattern)}else{var formatPatternParts=this.pattern.replace(/\'+(?=\')/g,'\'\'').split('\'\'');if(formatPatternParts.length==1){formatPatternParts=this.pattern.split('\'');for(i=0;i<formatPatternParts.length;i++){if(i%2==0){formatPatternParts[i]=patternReplace(formatPatternParts[i])}}return formatPatternParts.join('')}else{for(i=0;i<formatPatternParts.length;i++){formatPatternParts2=formatPatternParts[i].split('\'');for(j=0;j<formatPatternParts2.length;j++){if(j%2==0){formatPatternParts2[j]=patternReplace(formatPatternParts2[j])}}formatPatternParts[i]=formatPatternParts2.join('')}return formatPatternParts.join('\'')}}return formattedDate}}